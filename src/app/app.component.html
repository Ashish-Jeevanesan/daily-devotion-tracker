<mat-sidenav-container class="app-container">

  <!-- ===== Mobile / Side Menu ===== -->
  <mat-sidenav #sidenav mode="over" position="end">
    <mat-nav-list>

      <a mat-list-item routerLink="/profile" (click)="sidenav.close()">
        <mat-icon>account_circle</mat-icon>
        <span>Profile</span>
      </a>
      <a mat-list-item routerLink="/progress" (click)="sidenav.close()">
        <mat-icon>calendar_today</mat-icon>
        <span>Progress</span>
      </a>
      <a
        *ngIf="profile()?.role === 'admin'"
        mat-list-item
        routerLink="/admin/reports"
        (click)="sidenav.close()"
      >
        <mat-icon>admin_panel_settings</mat-icon>
        <span>Admin Reports</span>
      </a>
      <a mat-list-item (click)="signOut(); sidenav.close()">
        <mat-icon>exit_to_app</mat-icon>
        <span>Sign Out</span>
      </a>

      <mat-divider></mat-divider>

      <mat-list-item>
        <mat-slide-toggle
          [checked]="themeService.isDark()"
          (change)="themeService.toggleTheme()">
          Dark mode
        </mat-slide-toggle>
      </mat-list-item>

    </mat-nav-list>
  </mat-sidenav>

  <!-- ===== Main Content ===== -->
  <mat-sidenav-content>

    <!-- App Bar -->
    <mat-toolbar class="app-toolbar" color="primary">

      <!-- App title -->
      <span class="app-title" routerLink="/">
        {{ title }}
      </span>

      <span class="spacer"></span>

      <!-- Desktop actions -->
      <div class="desktop-only" *ngIf="isLoggedIn()">

        <button
          mat-icon-button
          (click)="themeService.toggleTheme()"
          aria-label="Toggle theme">
          <mat-icon>
            {{ themeService.isDark() ? 'light_mode' : 'dark_mode' }}
          </mat-icon>
        </button>

        <button
          mat-icon-button
          routerLink="/progress"
          aria-label="Progress">
          <mat-icon>calendar_today</mat-icon>
        </button>

        <button
          *ngIf="profile()?.role === 'admin'"
          mat-icon-button
          routerLink="/admin/reports"
          aria-label="Admin Reports">
          <mat-icon>admin_panel_settings</mat-icon>
        </button>

        <button
          mat-icon-button
          routerLink="/profile"
          aria-label="User Profile">
          <mat-icon>account_circle</mat-icon>
        </button>

        <button mat-button (click)="signOut()">
          Sign out
        </button>

      </div>

      <!-- Mobile menu button -->
      <button
        mat-icon-button
        class="mobile-only"
        (click)="sidenav.toggle()"
        aria-label="Menu">
        <mat-icon>menu</mat-icon>
      </button>

    </mat-toolbar>

    <!-- Page Content -->
    <main class="content">
      <router-outlet></router-outlet>
    </main>

    <footer class="app-footer">
      <div class="footer-left">
        <span class="footer-text">
          © {{ currentYear }} · Built for our church ✝️ ·
        </span>
      </div>
      <a
          class="footer-link"
          href="mailto:ashishjwork09@gmail.com?subject=Daily%20Devotion%20Tracker%20-%20Contact%20Developer"
          aria-label="Contact developer"
        >
          Contact Developer
        </a>
    
      <!-- <a
        class="footer-link"
        href="mailto:ashishjwork09@gmail.com?subject=Daily%20Devotion%20Tracker%20-%20Feedback"
        aria-label="Send feedback to developer"
      >
        Feedback / Issues
      </a> -->
    </footer>

  </mat-sidenav-content>
</mat-sidenav-container>

<app-notification-outlet></app-notification-outlet>
